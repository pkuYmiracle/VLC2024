# VLC Task

## Sender STM32 设计

- 通过串口将数据传输给单片机。譬如，在电脑上通过串口（python/串口调试软件）给板子发送数据 "hello world"，板子将数据存在特定的 buffer 中。（这部分已经完成）
- 处理 buffer 中的数据，目前的思路是先将 buffer 转换成 0/1 二进制串。然后将二进制串转换为方波的电压给到液晶。此处需要设置液晶的引脚，DAC，方波的间隔...（还未完成）

## 编码

需要考虑的问题：

发送端：

1. 需要设计合理的开始标记，说明开始传输。（譬如连续的高电压）
2. 需要设计终结符（或者在开始处说明数据段的长度）。
3. 可能需要考虑分片（因为 buffer 的大小是有限的->目前设置是 512 bytes，所以当串口传输的数据长度超过 512 时，需要分片，并说明每一片是开始片/中间片），此处的分片单指从电脑传输到单片机需要分片，单片机会负责重新组合数据，所以单片机传输的光波是完整的，未分片的，解码时不用考虑分片的问题。
4. 可以添加特殊位，说明当前传输的数据格式（文本/图片）

发送端的代码需要用 python 编写，不需要考虑与设备的交互，只要考虑编码即可。
譬如，输入 hello world，得到 hello world 的编码，注意，编码的长度必须为 1 byte 的整数倍。

接收端：

1. 需要根据方波的间隔设置采样频率（暂时未设定，目前先随机选取）。比如发送 10000100的波，如何确定中间有多少个0？（但是由于会有扰动，所以也可以考虑用突变来辅助读取）
2. 需要能解码得到的数据。（根据各标志位，正确读取数据段的长度、格式，并还原数据段）